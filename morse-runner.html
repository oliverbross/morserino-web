<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Morse Runner - CW Pro Trainer</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
    <style>
        .section-header {
            position: relative !important;
            display: flex !important;
            justify-content: flex-start !important;
            align-items: center !important;
            width: 100% !important;
            min-height: 40px !important;
            padding: 8px 40px 8px 8px !important;
        }
        .section-header h2 {
            flex: 1 1 auto !important;
            margin: 0 !important;
            font-size: 1.25rem !important;
        }
        .icon-container {
            position: absolute !important;
            right: 8px !important;
            top: 50% !important;
            transform: translateY(-50%) !important;
            width: 24px !important;
            height: 24px !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
        }
        .section-header svg {
            width: 24px !important;
            height: 24px !important;
            stroke: white !important;
        }
        
        /* Contest Log Styling */
        .contest-log {
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }
        .contest-log th {
            background: #374151;
            position: sticky;
            top: 0;
            z-index: 10;
        }
        .contest-log tr.logged-qso {
            background: #065f46;
        }
        .contest-log tr.duplicate {
            background: #7f1d1d;
        }
        .contest-log tr.multiplier {
            background: #1e40af;
        }
        
        /* Input Field Styling */
        .callsign-input {
            font-family: 'Courier New', monospace;
            font-size: 18px;
            font-weight: bold;
            text-transform: uppercase;
        }
        
        /* Function Key Styling */
        .function-key {
            font-family: 'Courier New', monospace;
            font-size: 12px;
            min-height: 60px;
        }
        
        /* Score Display */
        .score-display {
            font-family: 'Courier New', monospace;
            font-weight: bold;
        }
        
        /* Station Status Indicators */
        .station-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 6px;
        }
        .station-cq { background: #10b981; }
        .station-sp { background: #f59e0b; }
        .station-pile { background: #ef4444; }
        
        /* Animation for new QSOs */
        @keyframes newQSO {
            0% { background: #3b82f6; }
            100% { background: transparent; }
        }
        .new-qso {
            animation: newQSO 2s ease-out;
        }
        
        /* Contest Timer */
        .contest-timer {
            font-family: 'Courier New', monospace;
            font-size: 24px;
            font-weight: bold;
        }
        .morse-logo {
            font-family: 'Courier New', monospace;
            font-size: 16px;
            letter-spacing: 2px;
            color: #60a5fa;
            padding: 8px 12px;
            background: linear-gradient(135deg, #1f2937 0%, #374151 100%);
            border-radius: 8px;
            border: 1px solid #4b5563;
            display: inline-block;
        }

        .word-separator {
            font-size: 14px;
            color: #9ca3af;
            margin: 0 3px;
        }
    </style>
</head>
<body class="bg-gray-900 text-white min-h-screen">
    <!-- New Professional Header -->
    <header class="bg-gray-800 border-b border-gray-700 shadow-lg">
        <div class="container max-w-6xl mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <!-- Logo and Title -->
                <div class="flex items-center space-x-4">
                    <div class="morse-logo text-center">
                        ‚Äî‚Ä¢‚Äî‚Ä¢ ‚Ä¢‚Äî‚Äî/‚Ä¢‚Äî‚Äî‚Ä¢ ‚Ä¢‚Äî‚Ä¢ ‚Äî‚Äî‚Äî/<br>
                        ‚Äî ‚Ä¢‚Äî‚Ä¢ ‚Ä¢‚Äî ‚Ä¢‚Ä¢ ‚Äî‚Ä¢ ‚Ä¢ ‚Ä¢‚Äî‚Ä¢
                    </div>
                    <div>
                        <h1 class="text-2xl font-bold text-white">CW Pro Trainer</h1>
                        <p class="text-sm text-gray-400">Professional Morse Code Training<br>for Radio Enthusiasts</p>
                    </div>
                </div>
                
                <!-- Main Navigation -->
                <nav class="flex items-center space-x-4">
                    <div class="relative">
                        <button id="trainingDropdown" class="text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium flex items-center">
                            üéØ Training
                            <svg class="ml-1 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>
                        <div id="trainingDropdownMenu" class="absolute right-0 mt-2 w-48 bg-gray-800 rounded-md shadow-lg opacity-0 invisible transition-all duration-200 z-50">
                            <div class="py-1">
                                <a href="tx-trainer.html" class="block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700">üì° TX Trainer</a>
                                <a href="koch-cw-trainer.html" class="block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700">üéß KOCH Trainer</a>
                                <a href="morse-runner.html" class="block px-4 py-2 text-sm text-blue-400 hover:bg-gray-700">üèÅ Morse Runner</a>
                            </div>
                        </div>
                    </div>
                    <a href="statistics.html" class="text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium">üìä Statistics</a>
                    <a href="account.html" class="text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium">üë§ Account</a>
                    <a href="help.html" class="text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium">‚ùì Help</a>
                    <button id="logoutButton" class="text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium">üö™ Logout</button>
                </nav>
            </div>
        </div>
    </header>

    <div class="container max-w-7xl mx-auto p-4">
        <!-- Page Title -->
        <div class="text-center mb-6">
            <h2 class="text-3xl font-bold text-white">üèÅ Morse Runner Contest Simulator</h2>
            <p class="text-gray-400 mt-2">Experience the intensity of CW contests with realistic conditions</p>
        </div>

        <div id="morseRunnerDebug" class="error hidden bg-red-600 p-2 rounded mb-4">Debug: Check console for errors.</div>
        
        <!-- User Status -->
        <div id="userStatus" class="text-center mb-6 hidden">
            <p class="text-lg">Contest operator: <span id="currentUsername" class="font-semibold text-orange-400"></span></p>
        </div>

        <div id="sortable-contest-sections" class="space-y-4">
            
            <!-- Contest Control Panel -->
            <div class="section bg-gray-800 shadow-lg rounded-lg p-6" data-id="contest-control">
                <div class="section-header cursor-pointer">
                    <h2 class="text-xl font-semibold">üèÅ Contest Control</h2>
                    <div class="icon-container">
                        <svg data-id="contest-control-icon" class="w-6 h-6 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </div>
                </div>
                <div id="contest-control-content" class="mt-4">
                    <!-- Contest Timer and Status -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                        <div class="bg-gray-700 p-4 rounded-lg text-center">
                            <div class="contest-timer text-green-400" id="contestTimer">00:00:00</div>
                            <div class="text-sm text-gray-300">Contest Time</div>
                        </div>
                        <div class="bg-gray-700 p-4 rounded-lg text-center">
                            <div class="text-2xl font-bold text-blue-400" id="currentRate">0</div>
                            <div class="text-sm text-gray-300">QSOs/Hour</div>
                        </div>
                        <div class="bg-gray-700 p-4 rounded-lg text-center">
                            <div class="text-2xl font-bold text-purple-400" id="bandActivity">Medium</div>
                            <div class="text-sm text-gray-300">Band Activity</div>
                        </div>
                    </div>
                    
                    <!-- Contest Controls -->
                    <div class="flex flex-wrap justify-center gap-2">
                        <button id="startContestButton" class="bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-lg transition duration-200">‚ñ∂Ô∏è Start Contest</button>
                        <button id="pauseContestButton" class="bg-yellow-600 hover:bg-yellow-700 text-white font-semibold py-2 px-4 rounded-lg transition duration-200 hidden">‚è∏Ô∏è Pause</button>
                        <button id="stopContestButton" class="bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-lg transition duration-200 hidden">‚èπÔ∏è Stop</button>
                        <button id="contestSettingsButton" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg transition duration-200">‚öôÔ∏è Settings</button>
                    </div>
                </div>
            </div>

            <!-- QSO Input Panel -->
            <div class="section bg-gray-800 shadow-lg rounded-lg p-6" data-id="qso-input">
                <div class="section-header cursor-pointer">
                    <h2 class="text-xl font-semibold">üìª QSO Input</h2>
                    <div class="icon-container">
                        <svg data-id="qso-input-icon" class="w-6 h-6 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </div>
                </div>
                <div id="qso-input-content" class="mt-4">
                    <!-- Callsign Input -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Callsign</label>
                            <input type="text" id="callsignInput" class="callsign-input w-full p-3 bg-gray-700 rounded-lg text-white border-2 border-gray-600 focus:border-orange-500 focus:outline-none" placeholder="Enter callsign..." maxlength="12">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Exchange</label>
                            <input type="text" id="exchangeInput" class="callsign-input w-full p-3 bg-gray-700 rounded-lg text-white border-2 border-gray-600 focus:border-orange-500 focus:outline-none" placeholder="599 zone/serial" maxlength="10">
                        </div>
                    </div>
                    
                    <!-- QSO Actions -->
                    <div class="flex flex-wrap justify-center gap-2 mb-4">
                        <button id="logQSOButton" class="bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-6 rounded-lg transition duration-200">‚úÖ Log QSO</button>
                        <button id="clearInputButton" class="bg-gray-600 hover:bg-gray-700 text-white font-semibold py-2 px-4 rounded-lg transition duration-200">üóëÔ∏è Clear</button>
                        <label class="flex items-center bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg transition duration-200 cursor-pointer">
                            <input type="checkbox" id="qsoConfirmed" class="mr-2 w-4 h-4">
                            üìã QSL
                        </label>
                    </div>
                    
                    <!-- Live Station Info -->
                    <div id="currentStationInfo" class="bg-gray-700 p-3 rounded-lg text-center hidden">
                        <div class="text-lg font-bold text-orange-400" id="currentStationCall">---</div>
                        <div class="text-sm text-gray-300">
                            <span id="currentStationSignal">S9</span> ‚Ä¢ 
                            <span id="currentStationMode">CQ</span> ‚Ä¢ 
                            <span id="currentStationSpeed">25 WPM</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Contest Log -->
            <div class="section bg-gray-800 shadow-lg rounded-lg p-6" data-id="contest-log">
                <div class="section-header cursor-pointer">
                    <h2 class="text-xl font-semibold">üìä Contest Log</h2>
                    <div class="icon-container">
                        <svg data-id="contest-log-icon" class="w-6 h-6 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </div>
                </div>
                <div id="contest-log-content" class="mt-4">
                    <!-- Log Statistics -->
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-3 mb-4">
                        <div class="bg-blue-600 p-3 rounded-lg text-center">
                            <div class="text-2xl font-bold text-white" id="totalQSOs">0</div>
                            <div class="text-xs text-blue-100">Total QSOs</div>
                        </div>
                        <div class="bg-green-600 p-3 rounded-lg text-center">
                            <div class="text-2xl font-bold text-white" id="verifiedQSOs">0</div>
                            <div class="text-xs text-green-100">Verified</div>
                        </div>
                        <div class="bg-purple-600 p-3 rounded-lg text-center">
                            <div class="text-2xl font-bold text-white" id="multipliers">0</div>
                            <div class="text-xs text-purple-100">Multipliers</div>
                        </div>
                        <div class="bg-yellow-600 p-3 rounded-lg text-center">
                            <div class="text-2xl font-bold text-white" id="totalScore">0</div>
                            <div class="text-xs text-yellow-100">Total Score</div>
                        </div>
                    </div>
                    
                    <!-- Contest Log Table -->
                    <div class="overflow-x-auto max-h-64 overflow-y-auto">
                        <table class="contest-log w-full text-sm">
                            <thead>
                                <tr class="text-left border-b border-gray-600">
                                    <th class="px-2 py-2">Time</th>
                                    <th class="px-2 py-2">Callsign</th>
                                    <th class="px-2 py-2">Freq</th>
                                    <th class="px-2 py-2">RST S</th>
                                    <th class="px-2 py-2">RST R</th>
                                    <th class="px-2 py-2">Exchange</th>
                                    <th class="px-2 py-2">Mult</th>
                                    <th class="px-2 py-2">Pts</th>
                                    <th class="px-2 py-2">Status</th>
                                </tr>
                            </thead>
                            <tbody id="contestLogTable">
                                <!-- Contest log entries will be populated here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Function Keys -->
            <div class="section bg-gray-800 shadow-lg rounded-lg p-6" data-id="function-keys">
                <div class="section-header cursor-pointer">
                    <h2 class="text-xl font-semibold">üéπ Function Keys</h2>
                    <div class="icon-container">
                        <svg data-id="function-keys-icon" class="w-6 h-6 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </div>
                </div>
                <div id="function-keys-content" class="mt-4">
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-2">
                        <button class="function-key bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-lg transition duration-200 text-center" data-key="F1">
                            <div class="font-bold">F1</div>
                            <div class="text-xs">CQ</div>
                        </button>
                        <button class="function-key bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-lg transition duration-200 text-center" data-key="F2">
                            <div class="font-bold">F2</div>
                            <div class="text-xs">Exchange</div>
                        </button>
                        <button class="function-key bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-lg transition duration-200 text-center" data-key="F3">
                            <div class="font-bold">F3</div>
                            <div class="text-xs">TU QRZ</div>
                        </button>
                        <button class="function-key bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-lg transition duration-200 text-center" data-key="F4">
                            <div class="font-bold">F4</div>
                            <div class="text-xs">My Call</div>
                        </button>
                        <button class="function-key bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-lg transition duration-200 text-center" data-key="F5">
                            <div class="font-bold">F5</div>
                            <div class="text-xs">QRL?</div>
                        </button>
                        <button class="function-key bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-lg transition duration-200 text-center" data-key="F6">
                            <div class="font-bold">F6</div>
                            <div class="text-xs">QRZ?</div>
                        </button>
                        <button class="function-key bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-lg transition duration-200 text-center" data-key="F7">
                            <div class="font-bold">F7</div>
                            <div class="text-xs">AGN?</div>
                        </button>
                        <button class="function-key bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-lg transition duration-200 text-center" data-key="F8">
                            <div class="font-bold">F8</div>
                            <div class="text-xs">QRT</div>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Contest Settings -->
            <div class="section bg-gray-800 shadow-lg rounded-lg p-6" data-id="contest-settings">
                <div class="section-header cursor-pointer">
                    <h2 class="text-xl font-semibold">‚öôÔ∏è Contest Settings</h2>
                    <div class="icon-container">
                        <svg data-id="contest-settings-icon" class="w-6 h-6 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </div>
                </div>
                <div id="contest-settings-content" class="mt-4 hidden">
                    <!-- Contest Type -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-300 mb-2">Contest Type</label>
                        <select id="contestTypeSelect" class="w-full p-3 bg-gray-700 rounded-lg text-white border border-gray-600">
                            <option value="cqww">CQ World Wide CW</option>
                            <option value="arrldx">ARRL DX CW</option>
                            <option value="cqwpx">CQ WPX CW</option>
                            <option value="custom">Custom Contest</option>
                        </select>
                    </div>
                    
                    <!-- Duration Settings -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Contest Duration</label>
                            <select id="contestDurationSelect" class="w-full p-3 bg-gray-700 rounded-lg text-white border border-gray-600">
                                <option value="5">5 minutes</option>
                                <option value="10">10 minutes</option>
                                <option value="15">15 minutes</option>
                                <option value="30">30 minutes</option>
                                <option value="60">1 hour</option>
                                <option value="120">2 hours</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">CW Speed Range</label>
                            <select id="speedRangeSelect" class="w-full p-3 bg-gray-700 rounded-lg text-white border border-gray-600">
                                <option value="15-25">15-25 WPM</option>
                                <option value="20-30">20-30 WPM</option>
                                <option value="25-35">25-35 WPM</option>
                                <option value="30-40">30-40 WPM</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Band Conditions -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-300 mb-3">Band Conditions</label>
                        <div class="grid grid-cols-2 md:grid-cols-3 gap-3">
                            <label class="flex items-center">
                                <input type="checkbox" id="qrnToggle" class="mr-2 w-4 h-4 text-orange-600 bg-gray-600 border-gray-500 rounded focus:ring-orange-500">
                                <span class="text-sm">QRN (Noise)</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" id="qrmToggle" class="mr-2 w-4 h-4 text-orange-600 bg-gray-600 border-gray-500 rounded focus:ring-orange-500">
                                <span class="text-sm">QRM (Interference)</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" id="flutterToggle" class="mr-2 w-4 h-4 text-orange-600 bg-gray-600 border-gray-500 rounded focus:ring-orange-500">
                                <span class="text-sm">Flutter</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" id="qsbToggle" class="mr-2 w-4 h-4 text-orange-600 bg-gray-600 border-gray-500 rounded focus:ring-orange-500">
                                <span class="text-sm">QSB (Fading)</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" id="lidsToggle" class="mr-2 w-4 h-4 text-orange-600 bg-gray-600 border-gray-500 rounded focus:ring-orange-500">
                                <span class="text-sm">LID's</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" id="pileupToggle" class="mr-2 w-4 h-4 text-orange-600 bg-gray-600 border-gray-500 rounded focus:ring-orange-500">
                                <span class="text-sm">Pile-ups</span>
                            </label>
                        </div>
                    </div>
                    
                    <!-- My Station Settings -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-300 mb-2">My Callsign</label>
                        <input type="text" id="myCallsignInput" class="callsign-input w-full p-3 bg-gray-700 rounded-lg text-white border border-gray-600" placeholder="Enter your callsign" maxlength="10" value="OM0RX">
                    </div>
                </div>
            </div>

        </div>

        <!-- Navigation -->
        <div class="flex flex-wrap justify-center gap-2 mt-6">
            <button id="backToTrainingFromRunner" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg transition duration-200">üè† Back to Training</button>
            <button id="kochFromRunner" class="bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-lg transition duration-200">üéß KOCH Trainer</button>
            <button id="accountFromRunner" class="bg-gray-600 hover:bg-gray-700 text-white font-semibold py-2 px-4 rounded-lg transition duration-200">üë§ Account</button>
            <button id="helpFromRunner" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg transition duration-200">‚ùì Help</button>
            <button id="statisticsFromRunner" class="bg-purple-600 hover:bg-purple-700 text-white font-semibold py-2 px-4 rounded-lg transition duration-200">üìä Statistics</button>
        </div>
    </div>

    <!-- Contest Settings Modal -->
    <div id="contestSettingsModal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50">
        <div class="bg-gray-900 p-6 rounded-lg max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-white">‚öôÔ∏è Contest Settings</h2>
                <button id="closeSettingsModal" class="text-gray-400 hover:text-white text-2xl">√ó</button>
            </div>

            <div class="space-y-6">
                <!-- Contest Mode -->
                <div class="bg-gray-800 p-4 rounded-lg">
                    <h3 class="text-lg font-semibold text-blue-400 mb-3">Contest Mode</h3>
                    <div class="space-y-2">
                        <label class="flex items-center">
                            <input type="radio" name="contestMode" value="pileup" id="pileupMode" class="mr-3" checked>
                            <div>
                                <div class="text-white font-medium">Pile-Up Mode</div>
                                <div class="text-gray-400 text-sm">Multiple stations call after CQ (good for copying skills)</div>
                            </div>
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="contestMode" value="single" id="singleMode" class="mr-3">
                            <div>
                                <div class="text-white font-medium">Single Calls Mode</div>
                                <div class="text-gray-400 text-sm">One station calls after each QSO (good for typing skills)</div>
                            </div>
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="contestMode" value="wpx" id="wpxMode" class="mr-3">
                            <div>
                                <div class="text-white font-medium">WPX Competition Mode</div>
                                <div class="text-gray-400 text-sm">Fixed band conditions with user-controlled speed and activity</div>
                            </div>
                        </label>
                    </div>
                </div>

                <!-- CW Speed Settings -->
                <div class="bg-gray-800 p-4 rounded-lg">
                    <h3 class="text-lg font-semibold text-green-400 mb-3">CW Speed Settings</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Speed Range</label>
                            <select id="speedRange" class="w-full p-2 bg-gray-700 rounded border border-gray-600 text-white">
                                <option value="15-25">15-25 WPM (Beginner)</option>
                                <option value="20-30">20-30 WPM (Intermediate)</option>
                                <option value="25-35" selected>25-35 WPM (Advanced)</option>
                                <option value="30-40">30-40 WPM (Expert)</option>
                                <option value="35-45">35-45 WPM (Contest)</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Exact Speed (WPM)</label>
                            <select id="exactSpeed" class="w-full p-2 bg-gray-700 rounded border border-gray-600 text-white">
                                <option value="auto" selected>Auto (varies in range)</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Audio Settings -->
                <div class="bg-gray-800 p-4 rounded-lg">
                    <h3 class="text-lg font-semibold text-yellow-400 mb-3">Audio Settings</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">CW Pitch (Hz)</label>
                            <select id="cwPitch" class="w-full p-2 bg-gray-700 rounded border border-gray-600 text-white">
                                <option value="400">400 Hz</option>
                                <option value="500">500 Hz</option>
                                <option value="600" selected>600 Hz</option>
                                <option value="700">700 Hz</option>
                                <option value="800">800 Hz</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Volume</label>
                            <input type="range" id="volumeSlider" min="0" max="100" value="70" class="w-full">
                            <div class="text-center text-sm text-gray-400 mt-1"><span id="volumeValue">70</span>%</div>
                        </div>
                    </div>
                </div>

                <!-- Station Settings -->
                <div class="bg-gray-800 p-4 rounded-lg">
                    <h3 class="text-lg font-semibold text-purple-400 mb-3">Station Settings</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">My Callsign</label>
                            <input type="text" id="modalMyCallsign" class="w-full p-2 bg-gray-700 rounded border border-gray-600 text-white uppercase" maxlength="10" value="OM0RX">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">My Zone (CQ WW)</label>
                            <select id="myZone" class="w-full p-2 bg-gray-700 rounded border border-gray-600 text-white">
                                <option value="15" selected>Zone 15 (OM/OK)</option>
                                <option value="1">Zone 1 (W/VE East)</option>
                                <option value="2">Zone 2 (W/VE Central)</option>
                                <option value="3">Zone 3 (W/VE West)</option>
                                <option value="4">Zone 4 (W/VE Pacific)</option>
                                <option value="5">Zone 5 (W/VE Mountain)</option>
                                <option value="14">Zone 14 (Europe West)</option>
                                <option value="16">Zone 16 (Europe East)</option>
                                <option value="25">Zone 25 (Asia)</option>
                                <option value="30">Zone 30 (Oceania)</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Activity Settings -->
                <div class="bg-gray-800 p-4 rounded-lg">
                    <h3 class="text-lg font-semibold text-orange-400 mb-3">Activity Settings</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Activity Level</label>
                            <input type="range" id="activityLevel" min="1" max="10" value="5" class="w-full">
                            <div class="text-center text-sm text-gray-400 mt-1">
                                <span id="activityValue">5</span> stations can call after CQ/QSO
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Contest Duration</label>
                            <select id="modalContestDuration" class="w-full p-2 bg-gray-700 rounded border border-gray-600 text-white">
                                <option value="5" selected>5 minutes</option>
                                <option value="10">10 minutes</option>
                                <option value="15">15 minutes</option>
                                <option value="30">30 minutes</option>
                                <option value="60">1 hour</option>
                                <option value="120">2 hours</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Band Conditions -->
                <div class="bg-gray-800 p-4 rounded-lg">
                    <h3 class="text-lg font-semibold text-red-400 mb-3">Band Conditions</h3>
                    <div class="grid grid-cols-2 md:grid-cols-3 gap-3">
                        <label class="flex items-center">
                            <input type="checkbox" id="modalQrnToggle" class="mr-2 w-4 h-4">
                            <span class="text-sm">QRN (Noise)</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" id="modalQrmToggle" class="mr-2 w-4 h-4">
                            <span class="text-sm">QRM (Interference)</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" id="modalFlutterToggle" class="mr-2 w-4 h-4">
                            <span class="text-sm">Flutter</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" id="modalQsbToggle" class="mr-2 w-4 h-4">
                            <span class="text-sm">QSB (Fading)</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" id="modalLidsToggle" class="mr-2 w-4 h-4">
                            <span class="text-sm">LID's</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" id="modalPileupToggle" class="mr-2 w-4 h-4">
                            <span class="text-sm">Pile-ups</span>
                        </label>
                    </div>
                </div>

                <!-- Function Key Messages -->
                <div class="bg-gray-800 p-4 rounded-lg">
                    <h3 class="text-lg font-semibold text-cyan-400 mb-3">Function Key Messages</h3>
                    <div class="grid grid-cols-1 gap-2">
                        <div class="grid grid-cols-4 gap-2 text-sm">
                            <div class="font-mono text-gray-400">F1 (CQ):</div>
                            <div class="col-span-3 text-gray-300">CQ CQ TEST [CALLSIGN] [CALLSIGN]</div>
                            <div class="font-mono text-gray-400">F2 (Exchange):</div>
                            <div class="col-span-3 text-gray-300">[CALLSIGN] TU 599 [ZONE]</div>
                            <div class="font-mono text-gray-400">F3 (TU QRZ):</div>
                            <div class="col-span-3 text-gray-300">TU QRZ</div>
                            <div class="font-mono text-gray-400">F4 (QRZ):</div>
                            <div class="col-span-3 text-gray-300">QRZ?</div>
                        </div>
                        <div class="text-xs text-gray-500 mt-2">
                            * Function keys will be customizable in future updates
                        </div>
                    </div>
                </div>
            </div>

            <div class="flex justify-end space-x-3 mt-6">
                <button id="resetSettings" class="bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg">Reset Defaults</button>
                <button id="saveSettings" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg">Save Settings</button>
            </div>
        </div>
    </div>

    <!-- Professional Footer -->
    <footer class="bg-gray-800 border-t border-gray-700 mt-12">
        <div class="container max-w-6xl mx-auto px-6 py-8">
            <div class="text-center space-y-4">
                <p class="text-gray-300 text-sm leading-relaxed">
                    This website is dedicated to helping amateur radio operators improve their Morse code skills.
                </p>
                <p class="text-gray-400 text-xs">
                    <strong>Acknowledgements:</strong> Vincenzo IW7DMH, Ludwig Koch, and Alex Shovkoplyas VE3NEA. I did take a lot of ideas from them.
                </p>
                <p class="text-gray-400 text-xs">
                    This website is provided 'as is' for educational purposes. The owner disclaims any liability for damages resulting from its use.
                </p>
                <p class="text-gray-400 text-xs">
                    For more information, contact <strong>OM0RX</strong> - <a href="mailto:oliver@om0rx.com" class="text-blue-400 hover:text-blue-300">oliver@om0rx.com</a>
                </p>
                <p class="text-gray-500 text-xs border-t border-gray-700 pt-4">
                    Copyright ¬© 2025 OM0RX. All rights reserved.
                </p>
            </div>
        </div>
    </footer>

    <script>
    // API configuration
    const apiBaseUrl = 'https://om0rx.com/morserino/api';
    
    // Dropdown functionality
    document.getElementById('trainingDropdown').addEventListener('click', (e) => {
        e.preventDefault();
        const menu = document.getElementById('trainingDropdownMenu');
        menu.classList.toggle('opacity-0');
        menu.classList.toggle('invisible');
    });

    // Close dropdown when clicking outside
    document.addEventListener('click', (e) => {
        const dropdown = document.getElementById('trainingDropdown');
        const menu = document.getElementById('trainingDropdownMenu');
        if (!dropdown.contains(e.target) && !menu.contains(e.target)) {
            menu.classList.add('opacity-0');
            menu.classList.add('invisible');
        }
    });
    
    // Navigation and logout functionality
    document.getElementById('logoutButton').addEventListener('click', async () => {
        try {
            await fetch(`${apiBaseUrl}/logout.php`, {
                method: 'POST',
                credentials: 'include'
            });
            window.location.href = 'login.html';
        } catch (error) {
            console.error('Logout failed:', error);
            window.location.href = 'login.html';
        }
    });
    </script>
    <script src="morse-runner-audio.js"></script>
    <script src="morse-runner.js?v=1.0"></script>
</body>
</html>